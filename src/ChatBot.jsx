// return (
//   <>
//     <div className="chatbot">
//       {/* Chatbot Icon */}
//       <div className="bot-icon" onClick={toggleChat}>
//         <div className="icon-inner">
//           <i className="fa fa-commenting" aria-hidden="true"></i>
//         </div>
//       </div>

//       {/* Chatbot Window */}
//       {isChatOpen && (
//         <div className="chat-window">
//           <div className="chat-header">
//             <span className="close-icon" onClick={toggleChat}>
//               <i className="fa fa-window-close" aria-hidden="true"></i>
//             </span>
//             <h4>How can we help you?</h4>
//           </div>
//           <div className="chat-content">
//             <div className="messages" ref={messagesRef}>
//               {messages.map((msg, index) => (
//                 <div key={index} className={`message ${msg.type}`}>
//                   {msg.type === "bot" && (
//                     <img className="avatar" src={avatarUrl} alt="Bot Avatar" />
//                   )}
//                   <div className="message-text">
//                     {msg.qrCode ? (
//                       <img src={msg.qrCode} alt="QR Code" />
//                     ) : (
//                       <div style={{ color: "black" }}>{msg.text}</div>
//                     )}
//                   </div>
//                 </div>
//               ))}
//             </div>
//             <form onSubmit={sendMessage} className="chat-input">
//               <input
//                 value={message}
//                 onChange={(e) => setMessage(e.target.value)}
//                 type="text"
//                 placeholder="Send a message..."
//                 className="input-field"
//               />
//               <button type="submit" className="send-button">
//                 <i className="fa fa-paper-plane" aria-hidden="true"></i>
//               </button>
//             </form>
//           </div>
//         </div>
//       )}
//     </div>
//     <style jsx>{`
//       /* ...your styles here... */
//       /* Chatbot Icon */
//         .bot-icon {
//         position: fixed;
//         bottom: 15px;
//         left: 15px;
//         background: #3b4f69;
//         border-radius: 50%;
//         width: 60px;
//         height: 60px;
//         display: flex;
//         justify-content: center;
//         align-items: center;
//         cursor: pointer;
//         z-index: 1000;
//         }

//         .icon-inner {
//         color: white;
//         font-size: 1.5rem;
//         margin: 17px;
//         }

//         /* Chat Window */
//         .chat-window {
//         position: fixed;
//         bottom: 80px;
//         left: 15px;
//         width: 320px;
//         background: white;
//         border-radius: 10px;
//         box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
//         display: flex;
//         flex-direction: column;
//         z-index: 1000;
//         }

//         .chat-header {
//         background: gray;
//         color: white;
//         padding: 10px;
//         justify-content: space-between;
//         align-items: center;
//         border-radius: 10px 10px 0 0;
//         }

//         .close-icon {
//         cursor: pointer;
//         }

//         .chat-content {
//         display: flex;
//         flex-direction: column;
//         padding: 10px;
//         overflow-y: auto;
//         }

//         .messages {
//         overflow-y: auto;
//         margin-bottom: 10px;
//         }

//         .message {
//         display: flex;
//         align-items: center;
//         margin-bottom: 10px;
//         }

//         .message.user {
//         justify-content: flex-end;
//         }

//         .message.bot {
//         justify-content: flex-start;
//         }

//         .message .avatar {
//         width: 30px;
//         height: 30px;
//         border-radius: 50%;
//         margin-right: 10px;
//         }

//         .message-text {
//         background: #f1f1f1;
//         border-radius: 15px;
//         padding: 10px;
//         max-width: 70%;
//         color: black !important;
//         }

//         .message.user .message-text {
//         background: #4caf50;
//         color: white;
//         }

//         /* Input Field */
//         .chat-input {
//         display: flex;
//         align-items: center;
//         padding: 10px;
//         border-top: 1px solid #ddd;
//         }

//         .input-field {
//         border: none;
//         padding: 10px;
//         border-radius: 20px;
//         margin-right: 10px;
//         background: #f1f1f1;
//         color: black;
//         }

//         .send-button {
//         background: #4caf50;
//         border-radius: 10px;
//         width: 50px;
//         color: white;
//         border: none;
//         cursor: pointer;
//         }

//         .send-button:hover {
//         background: #45a049;
//         }
//     `}</style>
//   </>
// );



















import React, { useState, useRef } from "react";
import QRCode from "qrcode";
// import "./Chatbot.css"; // Assuming the CSS is in a separate file
import "font-awesome/css/font-awesome.min.css";

const Chatbot = () => {
  // State management using useState
  const [isChatOpen, setIsChatOpen] = useState(false);
  const [message, setMessage] = useState("");
  const [messages, setMessages] = useState([
    {
      text: "üëã **Welcome to Rayu's Portfolio!**\n\nI'm your friendly assistant, ready to help with any questions about:\n\nüåê **Web Development Services**\nüí∞ **Pricing & Quotes**\n‚öõÔ∏è **React.js Expertise**\nüìû **Contact Information**\nüöÄ **Project Examples**\n‚è∞ **Timelines & Process**\n\nüí° **Try asking:**\n‚Ä¢ \"What services do you offer?\"\n‚Ä¢ \"How much does a website cost?\"\n‚Ä¢ \"Contact information\"\n‚Ä¢ \"Tell me about your experience\"\n\nHow can I help you today? üòä",
      type: "bot"
    }
  ]);
  const [isTyping, setIsTyping] = useState(false);
  const avatarUrl = "https://cdn-icons-png.flaticon.com/512/4712/4712027.png";

  // Ref for scrolling to the bottom of the messages
  const messagesRef = useRef(null);

  // Toggle chat window visibility
  const toggleChat = () => {
    setIsChatOpen(!isChatOpen);
  };

  // Handle sending a message
  const sendMessage = async (e) => {
    e.preventDefault();
    const userMessage = message.trim();
    if (!userMessage) return;

    addMessage(userMessage, "user");

    if (userMessage.toLowerCase().includes("qr")) {
      const qrCode = await generateQRCode(userMessage);
      addMessage(qrCode, "bot", true);
    } else {
      const botReply = getBotReply(userMessage);
      setTimeout(() => {
        addMessage(botReply, "bot");
      }, 500);
    }

    setMessage("");
  };

  // Add a message to the messages array and scroll to bottom
  const addMessage = (textOrQrCode, type, isQrCode = false) => {
    const message = isQrCode
      ? { qrCode: textOrQrCode, type }
      : { text: textOrQrCode, type };
    setMessages((prevMessages) => [...prevMessages, message]);
    scrollToBottom();
  };

  // Generate QR code using the qrcode library
  const generateQRCode = async (text) => {
    try {
      return await QRCode.toDataURL(text);
    } catch (err) {
      console.error("QR Code generation failed:", err);
      return null;
    }
  };

  // Determine bot reply based on user message with comprehensive responses
  const getBotReply = (userMessage) => {
    const lowerMessage = userMessage.toLowerCase();

    // Greetings
    if (lowerMessage.includes("hello") || lowerMessage.includes("hi") || lowerMessage.includes("hey") || lowerMessage.includes("good morning") || lowerMessage.includes("good afternoon") || lowerMessage.includes("good evening")) {
      const greetings = [
        "Hello there! üòä Welcome to Rayu's portfolio! How can I help you today?",
        "Hi! üëã Great to see you here! What would you like to know about Rayu?",
        "Hey! üåü I'm excited to help you learn more about Rayu's work!",
        "Good to see you! üéâ I'm here to answer any questions about Rayu's services and projects!"
      ];
      return greetings[Math.floor(Math.random() * greetings.length)];
    }

    // Web Development Services
    else if (lowerMessage.includes("web development") || lowerMessage.includes("website") || lowerMessage.includes("web design") || lowerMessage.includes("frontend") || lowerMessage.includes("backend")) {
      return "üåê **Web Development Services:**\n\n‚ú® **Frontend Development:**\n‚Ä¢ React.js applications\n‚Ä¢ Responsive design\n‚Ä¢ Modern UI/UX\n‚Ä¢ Interactive animations\n\nüîß **Backend Development:**\n‚Ä¢ API development\n‚Ä¢ Database integration\n‚Ä¢ Server setup\n\nüíº **Full-Stack Solutions:**\n‚Ä¢ Complete web applications\n‚Ä¢ E-commerce sites\n‚Ä¢ Portfolio websites\n‚Ä¢ Business websites\n\nWant to discuss your project? Let's connect! üöÄ";
    }

    // Technologies & Skills
    else if (lowerMessage.includes("skills") || lowerMessage.includes("technology") || lowerMessage.includes("tech stack") || lowerMessage.includes("programming") || lowerMessage.includes("languages")) {
      return "üíª **Rayu's Technical Skills:**\n\nüé® **Frontend:**\n‚Ä¢ React.js & Next.js\n‚Ä¢ JavaScript (ES6+)\n‚Ä¢ HTML5 & CSS3\n‚Ä¢ Tailwind CSS\n‚Ä¢ Bootstrap\n‚Ä¢ Framer Motion\n\n‚öôÔ∏è **Backend:**\n‚Ä¢ Node.js\n‚Ä¢ Express.js\n‚Ä¢ MongoDB\n‚Ä¢ MySQL\n‚Ä¢ RESTful APIs\n\nüõ†Ô∏è **Tools & Others:**\n‚Ä¢ Git & GitHub\n‚Ä¢ VS Code\n‚Ä¢ Figma\n‚Ä¢ Responsive Design\n‚Ä¢ Performance Optimization\n\nCheck the Skills section for more details! üìä";
    }

    // React specific
    else if (lowerMessage.includes("react") || lowerMessage.includes("jsx") || lowerMessage.includes("component")) {
      return "‚öõÔ∏è **React Development Expertise:**\n\nüî• **Specializations:**\n‚Ä¢ Custom React components\n‚Ä¢ State management (useState, useEffect)\n‚Ä¢ React Hooks\n‚Ä¢ Component lifecycle\n‚Ä¢ Props and state handling\n‚Ä¢ Event handling\n‚Ä¢ Conditional rendering\n\nüéØ **React Projects:**\n‚Ä¢ Interactive portfolios\n‚Ä¢ Dynamic web applications\n‚Ä¢ Real-time chat systems\n‚Ä¢ E-commerce platforms\n\nNeed a React developer? Rayu's got you covered! üöÄ";
    }

    // Pricing & Services
    else if (lowerMessage.includes("price") || lowerMessage.includes("cost") || lowerMessage.includes("rate") || lowerMessage.includes("budget") || lowerMessage.includes("quote") || lowerMessage.includes("estimate")) {
      return "üí∞ **Pricing Information:**\n\nüìã **Service Types:**\n‚Ä¢ Simple Landing Page: $200-500\n‚Ä¢ Business Website: $500-1500\n‚Ä¢ E-commerce Site: $1000-3000\n‚Ä¢ Custom Web App: $1500-5000+\n\n‚è±Ô∏è **Hourly Rate:** $25-50/hour\n\nüéÅ **What's Included:**\n‚Ä¢ Responsive design\n‚Ä¢ SEO optimization\n‚Ä¢ Performance optimization\n‚Ä¢ 30 days support\n‚Ä¢ Source code\n\nüí¨ **Custom Quote:** Every project is unique! Contact Rayu for a personalized quote based on your specific needs.\n\nüìû Ready to discuss? Let's talk!";
    }

    // Project Timeline
    else if (lowerMessage.includes("timeline") || lowerMessage.includes("how long") || lowerMessage.includes("duration") || lowerMessage.includes("delivery") || lowerMessage.includes("when")) {
      return "‚è∞ **Project Timeline:**\n\nüöÄ **Typical Delivery Times:**\n‚Ä¢ Landing Page: 3-7 days\n‚Ä¢ Business Website: 1-3 weeks\n‚Ä¢ E-commerce Site: 2-6 weeks\n‚Ä¢ Custom Web App: 4-12 weeks\n\nüìÖ **Process:**\n1. **Planning** (1-2 days)\n2. **Design** (2-5 days)\n3. **Development** (varies)\n4. **Testing** (1-3 days)\n5. **Deployment** (1 day)\n\n‚ö° **Rush Jobs:** Available with 50% surcharge\n\nüìû Need it faster? Let's discuss your deadline!";
    }

    // Process & Workflow
    else if (lowerMessage.includes("process") || lowerMessage.includes("workflow") || lowerMessage.includes("how do you work") || lowerMessage.includes("methodology")) {
      return "üîÑ **Development Process:**\n\nüìã **Step-by-Step:**\n1. **Discovery Call** - Understanding your needs\n2. **Proposal** - Detailed plan & quote\n3. **Design Phase** - Mockups & wireframes\n4. **Development** - Coding your solution\n5. **Testing** - Quality assurance\n6. **Launch** - Going live!\n7. **Support** - 30 days included\n\nüí¨ **Communication:**\n‚Ä¢ Daily progress updates\n‚Ä¢ Weekly milestone reviews\n‚Ä¢ 24/7 availability via Telegram\n\nüîß **Tools Used:**\n‚Ä¢ GitHub for version control\n‚Ä¢ Figma for design\n‚Ä¢ Slack/Telegram for communication\n\nTransparent and professional! üåü";
    }

    // Support & Maintenance
    else if (lowerMessage.includes("support") || lowerMessage.includes("maintenance") || lowerMessage.includes("help") || lowerMessage.includes("assistance") || lowerMessage.includes("after delivery")) {
      return "ü§ù **Support & Maintenance:**\n\n‚úÖ **Included Support (30 days):**\n‚Ä¢ Bug fixes\n‚Ä¢ Minor content updates\n‚Ä¢ Performance optimization\n‚Ä¢ Technical assistance\n\nüîß **Extended Support Options:**\n‚Ä¢ Monthly maintenance: $50-200/month\n‚Ä¢ Content updates\n‚Ä¢ Security updates\n‚Ä¢ Feature additions\n‚Ä¢ Performance monitoring\n\nüìû **24/7 Emergency Support:**\n‚Ä¢ Critical bug fixes\n‚Ä¢ Server issues\n‚Ä¢ Security concerns\n\nüí¨ **How to Get Help:**\n‚Ä¢ Telegram: @President_Alein\n‚Ä¢ Email: choengrayu307@gmail.com\n‚Ä¢ Phone: 096 998 3479\n\nYour success is my priority! üåü";
    }

    // Contact Information
    else if (lowerMessage.includes("contact") || lowerMessage.includes("reach") || lowerMessage.includes("get in touch")) {
      return "üìû **Contact Rayu:**\n\nüöÄ **Quick Response:**\nüí¨ Telegram: @President_Alein\nüîó https://t.me/Choeng_Rayu\n\nüìß **Email:**\nchoengrayu307@gmail.com\n\nüì± **Phone/WhatsApp:**\n+855 96 998 3479\n\nüåê **Social Media:**\nüíº LinkedIn: https://www.linkedin.com/in/rayu-choeng-351243335/\nüìò Facebook: Rayu Choeng\n\n‚ö° **Best Response Time:**\nTelegram (within 1 hour) > Email (within 24 hours)\n\nLet's build something amazing together! üöÄ";
    }

    // Specific contact methods
    else if (lowerMessage.includes("email")) {
      return "üìß **Email Contact:**\n\n‚úâÔ∏è **Primary Email:**\nchoengrayu307@gmail.com\n\nüìù **What to Include:**\n‚Ä¢ Project description\n‚Ä¢ Timeline requirements\n‚Ä¢ Budget range\n‚Ä¢ Reference websites (if any)\n\n‚è±Ô∏è **Response Time:** Within 24 hours\n\nüí° **Tip:** For faster response, try Telegram! üí¨\n\nOr click the contact button in the header! ‚ú®";
    }

    else if (lowerMessage.includes("phone") || lowerMessage.includes("call") || lowerMessage.includes("·ûõ·üÅ·ûÅ·ûë·ûº·ûö·ûü·üê·ûñ·üí·ûë")) {
      return "üì± **Phone Contact:**\n\n‚òéÔ∏è **Phone Number:**\n+855 96 998 3479\n\nüí¨ **Also Available on:**\n‚Ä¢ WhatsApp\n‚Ä¢ Telegram\n‚Ä¢ Voice calls\n‚Ä¢ Video calls\n\nüïê **Best Calling Hours:**\n‚Ä¢ Monday-Friday: 8 AM - 8 PM (GMT+7)\n‚Ä¢ Saturday: 9 AM - 6 PM\n‚Ä¢ Sunday: Emergency only\n\nüí° **Prefer messaging first?** Send a quick message on Telegram! üöÄ";
    }

    else if (lowerMessage.includes("telegram")) {
      return "üí¨ **Telegram Contact:**\n\nüöÄ **Username:** @President_Alein\nüîó **Direct Link:** https://t.me/Choeng_Rayu\n\n‚ö° **Why Telegram?**\n‚Ä¢ Fastest response (usually within 1 hour)\n‚Ä¢ File sharing capabilities\n‚Ä¢ Voice messages\n‚Ä¢ Screen sharing for demos\n‚Ä¢ Available 24/7\n\nüì± **Features:**\n‚Ä¢ Send project files\n‚Ä¢ Quick voice notes\n‚Ä¢ Real-time updates\n‚Ä¢ Secure messaging\n\nPreferred communication method! üåü";
    }

    else if (lowerMessage.includes("whatsapp")) {
      return "üì± **WhatsApp Contact:**\n\nüíö **Number:** +855 96 998 3479\n\n‚ú® **Perfect For:**\n‚Ä¢ Quick questions\n‚Ä¢ Voice messages\n‚Ä¢ File sharing\n‚Ä¢ Video calls\n‚Ä¢ Project updates\n\nüïê **Response Time:**\n‚Ä¢ Business hours: Within 2 hours\n‚Ä¢ After hours: Next business day\n\nüí° **Pro Tip:** Save the number and send a message introducing your project! üöÄ";
    }

    // Social Media
    else if (lowerMessage.includes("linkedin")) {
      return "üíº **LinkedIn Profile:**\n\nüîó **Connect Here:**\nhttps://www.linkedin.com/in/rayu-choeng-351243335/\n\nüåü **What You'll Find:**\n‚Ä¢ Professional experience\n‚Ä¢ Project showcases\n‚Ä¢ Client testimonials\n‚Ä¢ Industry insights\n‚Ä¢ Networking opportunities\n\nüí° **Great For:**\n‚Ä¢ Professional networking\n‚Ä¢ Business inquiries\n‚Ä¢ Career discussions\n‚Ä¢ Industry connections\n\nLet's connect professionally! ü§ù";
    }

    else if (lowerMessage.includes("facebook")) {
      return "üìò **Facebook Profile:**\n\nüë§ **Name:** Rayu Choeng\nüîó **Profile:** https://web.facebook.com/choeng.rayu.5\n\nüì± **Also Available:**\n‚Ä¢ Facebook Messenger\n‚Ä¢ Posts about projects\n‚Ä¢ Behind-the-scenes content\n‚Ä¢ Community updates\n\nüí¨ **Messenger Response:** Within 24 hours\n\nStay connected! ‚ú®";
    }

    else if (lowerMessage.includes("instagram")) {
      return "üì∏ **Instagram Update:**\n\nüöß **Coming Soon!** Instagram account is in development\n\nüì± **What to Expect:**\n‚Ä¢ Project showcases\n‚Ä¢ Development process\n‚Ä¢ Behind-the-scenes content\n‚Ä¢ Tips & tutorials\n‚Ä¢ Client success stories\n\nüí¨ **For Now, Use:**\n‚Ä¢ Telegram (fastest)\n‚Ä¢ Email\n‚Ä¢ LinkedIn\n‚Ä¢ Facebook\n\nThanks for your patience! üòä";
    }

    // Projects & Portfolio
    else if (lowerMessage.includes("project") || lowerMessage.includes("work") || lowerMessage.includes("portfolio") || lowerMessage.includes("example") || lowerMessage.includes("showcase")) {
      return "üöÄ **Rayu's Projects & Portfolio:**\n\nüíº **Featured Projects:**\n‚Ä¢ Interactive Portfolio Website\n‚Ä¢ E-commerce Platform\n‚Ä¢ Real-time Chat Application\n‚Ä¢ Business Landing Pages\n‚Ä¢ Custom Web Applications\n\nüéØ **Project Types:**\n‚Ä¢ Personal portfolios\n‚Ä¢ Business websites\n‚Ä¢ E-commerce stores\n‚Ä¢ Web applications\n‚Ä¢ Landing pages\n‚Ä¢ Blogs & CMS\n\nüîç **Check Out:**\n‚Ä¢ Projects section on this website\n‚Ä¢ GitHub repositories\n‚Ä¢ Live demos available\n\nüí° **Want to see specific examples?** Ask about any project type! ‚ú®";
    }

    // Experience & Background
    else if (lowerMessage.includes("experience") || lowerMessage.includes("background") || lowerMessage.includes("about") || lowerMessage.includes("who are you") || lowerMessage.includes("tell me about")) {
      return "üë®‚Äçüíª **About Rayu:**\n\nüéì **Background:**\n‚Ä¢ Passionate web developer\n‚Ä¢ Freelance professional\n‚Ä¢ Modern technology enthusiast\n‚Ä¢ Problem-solving focused\n\nüí™ **Experience:**\n‚Ä¢ 2+ years in web development\n‚Ä¢ 50+ successful projects\n‚Ä¢ Happy clients worldwide\n‚Ä¢ Continuous learning mindset\n\nüåü **Specialties:**\n‚Ä¢ React.js development\n‚Ä¢ Responsive design\n‚Ä¢ User experience (UX)\n‚Ä¢ Performance optimization\n‚Ä¢ Client communication\n\nüéØ **Mission:** Creating amazing web experiences that help businesses grow! üöÄ";
    }

    // Technologies Deep Dive
    else if (lowerMessage.includes("javascript") || lowerMessage.includes("js")) {
      return "üü® **JavaScript Expertise:**\n\n‚ö° **Modern JavaScript (ES6+):**\n‚Ä¢ Arrow functions\n‚Ä¢ Destructuring\n‚Ä¢ Async/await\n‚Ä¢ Promises\n‚Ä¢ Modules\n‚Ä¢ Template literals\n\nüîß **Frameworks & Libraries:**\n‚Ä¢ React.js (primary)\n‚Ä¢ Node.js\n‚Ä¢ Express.js\n‚Ä¢ jQuery (when needed)\n\nüéØ **Applications:**\n‚Ä¢ Interactive web apps\n‚Ä¢ API integrations\n‚Ä¢ Real-time features\n‚Ä¢ Dynamic content\n‚Ä¢ Form validations\n\nJavaScript powers the modern web! üåê";
    }

    else if (lowerMessage.includes("css") || lowerMessage.includes("styling") || lowerMessage.includes("design")) {
      return "üé® **CSS & Design Skills:**\n\n‚ú® **CSS Technologies:**\n‚Ä¢ CSS3 & Flexbox\n‚Ä¢ CSS Grid\n‚Ä¢ Animations & Transitions\n‚Ä¢ Responsive design\n‚Ä¢ Mobile-first approach\n\nüéØ **Frameworks:**\n‚Ä¢ Tailwind CSS\n‚Ä¢ Bootstrap\n‚Ä¢ Material-UI\n‚Ä¢ Styled Components\n\nüñåÔ∏è **Design Principles:**\n‚Ä¢ User-centered design\n‚Ä¢ Accessibility (WCAG)\n‚Ä¢ Performance optimization\n‚Ä¢ Cross-browser compatibility\n\nBeautiful and functional designs! üåü";
    }

    // Business & Freelancing
    else if (lowerMessage.includes("freelance") || lowerMessage.includes("business") || lowerMessage.includes("why choose") || lowerMessage.includes("advantage")) {
      return "üíº **Why Choose Rayu?**\n\nüåü **Advantages:**\n‚Ä¢ Direct communication (no middleman)\n‚Ä¢ Competitive pricing\n‚Ä¢ Fast turnaround times\n‚Ä¢ Personalized service\n‚Ä¢ 100% satisfaction guarantee\n\nü§ù **Client Benefits:**\n‚Ä¢ Dedicated developer\n‚Ä¢ Flexible working hours\n‚Ä¢ Regular updates\n‚Ä¢ Post-launch support\n‚Ä¢ Long-term partnership\n\nüìà **Success Metrics:**\n‚Ä¢ 98% client satisfaction\n‚Ä¢ 100% on-time delivery\n‚Ä¢ 50+ completed projects\n‚Ä¢ 24/7 availability\n\nYour success is my success! üöÄ";
    }

    // Learning & Growth
    else if (lowerMessage.includes("learn") || lowerMessage.includes("tutorial") || lowerMessage.includes("teach") || lowerMessage.includes("course")) {
      return "üìö **Learning & Teaching:**\n\nüéì **Available Services:**\n‚Ä¢ One-on-one mentoring\n‚Ä¢ Code reviews\n‚Ä¢ Technical consultations\n‚Ä¢ Best practices guidance\n‚Ä¢ Career advice\n\nüí° **Topics Covered:**\n‚Ä¢ Web development basics\n‚Ä¢ React.js fundamentals\n‚Ä¢ JavaScript concepts\n‚Ä¢ Project planning\n‚Ä¢ Freelancing tips\n\n‚è∞ **Mentoring Rates:**\n‚Ä¢ $30/hour for 1-on-1 sessions\n‚Ä¢ Group sessions available\n‚Ä¢ Custom learning plans\n\nLet's grow together! üå±";
    }

    // Emergency & Urgent
    else if (lowerMessage.includes("urgent") || lowerMessage.includes("emergency") || lowerMessage.includes("asap") || lowerMessage.includes("rush") || lowerMessage.includes("immediately")) {
      return "üö® **Urgent Project Support:**\n\n‚ö° **Emergency Services:**\n‚Ä¢ 24/7 availability\n‚Ä¢ Same-day fixes\n‚Ä¢ Rush project delivery\n‚Ä¢ Critical bug resolution\n\nüí∞ **Rush Pricing:**\n‚Ä¢ 50% surcharge for urgent work\n‚Ä¢ Same-day delivery: +100%\n‚Ä¢ Weekend work: +25%\n\nüìû **Immediate Contact:**\n‚Ä¢ Telegram: @President_Alein (fastest)\n‚Ä¢ Phone: +855 96 998 3479\n‚Ä¢ WhatsApp: Same number\n\n‚è±Ô∏è **Response Time:** Within 30 minutes for emergencies\n\nI've got your back! üõ°Ô∏è";
    }

    // Payment & Terms
    else if (lowerMessage.includes("payment") || lowerMessage.includes("pay") || lowerMessage.includes("invoice") || lowerMessage.includes("terms")) {
      return "üí≥ **Payment Information:**\n\nüí∞ **Payment Methods:**\n‚Ä¢ Bank transfer\n‚Ä¢ PayPal\n‚Ä¢ Wise (Transferwise)\n‚Ä¢ Cryptocurrency (Bitcoin, USDT)\n‚Ä¢ Local payment methods\n\nüìã **Payment Terms:**\n‚Ä¢ 50% upfront for projects >$500\n‚Ä¢ 25% upfront for smaller projects\n‚Ä¢ Final payment on completion\n‚Ä¢ Net 7 days for invoices\n\nüîí **Security:**\n‚Ä¢ Secure payment processing\n‚Ä¢ Invoice-based billing\n‚Ä¢ Payment protection\n‚Ä¢ Refund policy available\n\nFlexible and secure! üí™";
    }

    // Testimonials & Reviews
    else if (lowerMessage.includes("review") || lowerMessage.includes("testimonial") || lowerMessage.includes("feedback") || lowerMessage.includes("client") || lowerMessage.includes("reference")) {
      return "‚≠ê **Client Testimonials:**\n\nüåü **Recent Feedback:**\n\"Excellent work and communication!\" - Sarah M.\n\"Delivered exactly what we needed, on time!\" - John D.\n\"Professional and skilled developer\" - Mike R.\n\nüìä **Ratings:**\n‚Ä¢ Quality: ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (5/5)\n‚Ä¢ Communication: ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (5/5)\n‚Ä¢ Timeliness: ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (5/5)\n‚Ä¢ Value: ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (5/5)\n\nüíº **References Available:**\n‚Ä¢ Previous client contacts\n‚Ä¢ Project case studies\n‚Ä¢ Live project demos\n\nYour satisfaction guaranteed! üéØ";
    }

    // Common Greetings & Politeness
    else if (lowerMessage.includes("thank") || lowerMessage.includes("thanks") || lowerMessage.includes("appreciate")) {
      return "üòä **You're Very Welcome!**\n\nüôè Thank you for your interest in Rayu's services!\n\nüí° **Need More Help?**\n‚Ä¢ Ask about specific services\n‚Ä¢ Request a project quote\n‚Ä¢ Schedule a consultation\n‚Ä¢ Get technical advice\n\nüìû **Ready to Start?**\nLet's discuss your project! Contact Rayu anytime.\n\nHappy to help! ‚ú®";
    }

    else if (lowerMessage.includes("bye") || lowerMessage.includes("goodbye") || lowerMessage.includes("see you") || lowerMessage.includes("talk later")) {
      return "üëã **Goodbye & Thank You!**\n\nüåü Thanks for visiting Rayu's portfolio!\n\nüìû **Before You Go:**\n‚Ä¢ Save contact information\n‚Ä¢ Follow on social media\n‚Ä¢ Bookmark this website\n‚Ä¢ Share with friends who need web development\n\nüí¨ **Remember:**\nI'm always here to help with your web development needs!\n\nHave a wonderful day! üåà";
    }

    // Default response with helpful suggestions
    else {
      return "ü§î **I'd love to help you with that!**\n\nüí° **Popular Questions:**\n‚Ä¢ \"What services do you offer?\"\n‚Ä¢ \"How much does a website cost?\"\n‚Ä¢ \"What's your experience with React?\"\n‚Ä¢ \"How long does a project take?\"\n‚Ä¢ \"Can you help with urgent projects?\"\n‚Ä¢ \"What's included in your support?\"\n\nüìû **Quick Actions:**\n‚Ä¢ Type \"contact\" for all contact info\n‚Ä¢ Type \"pricing\" for service costs\n‚Ä¢ Type \"skills\" for technical abilities\n‚Ä¢ Type \"process\" for how I work\n\nüí¨ **Or ask me anything specific about web development!**\n\nI'm here to help! üöÄ";
    }
  };

  // Scroll to the bottom of the messages div
  const scrollToBottom = () => {
    if (messagesRef.current) {
      messagesRef.current.scrollTop = messagesRef.current.scrollHeight;
    }
  };

  // JSX structure
    return (
    <>
        <div className="chatbot">
        {/* Chatbot Icon */}
        <div className="bot-icon" onClick={toggleChat}>
            <div className="icon-inner">
            <i className="fa fa-commenting" aria-hidden="true"></i>
            </div>
        </div>

        {/* Enhanced Chatbot Window */}
        {isChatOpen && (
            <div className="chat-window">
            <div className="chat-header">
              <div className="header-content">
                <img className="header-avatar" src={avatarUrl} alt="Assistant Avatar" />
                <div className="header-text">
                  <h4>Rayu's Assistant</h4>
                  <span className="status">Online ‚Ä¢ Ready to help! üåü</span>
                </div>
              </div>
              <span className="close-icon" onClick={toggleChat}>
                <i className="fa fa-times" aria-hidden="true"></i>
              </span>
            </div>
            <div className="chat-content">
                <div className="messages" ref={messagesRef}>
                {messages.map((msg, index) => (
                    <div key={index} className={`message ${msg.type}`}>
                    {msg.type === "bot" && (
                        <img className="avatar" src={avatarUrl} alt="Bot Avatar" />
                    )}
                    <div className="message-text">
                        {msg.qrCode ? (
                        <img src={msg.qrCode} alt="QR Code" />
                        ) : (
                        <div style={{ color: "black" }}>{msg.text}</div>
                        )}
                    </div>
                    </div>
                ))}
                </div>
                <form onSubmit={sendMessage} className="chat-input">
                <input
                    value={message}
                    onChange={(e) => setMessage(e.target.value)}
                    type="text"
                    placeholder="Send a message..."
                    className="input-field"
                />
                <button type="submit" className="send-button">
                    <i className="fa fa-paper-plane" aria-hidden="true"></i>
                </button>
                </form>
            </div>
            </div>
        )}
      </div>
      <style jsx>{`
        /* Chatbot Container */
        .chatbot {
          position: fixed;
          bottom: 0;
          left: 0;
          z-index: 1000;
          font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        /* Chatbot Icon */
        .bot-icon {
          position: fixed;
          bottom: 20px;
          left: 20px;
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          border-radius: 50%;
          width: 70px;
          height: 70px;
          display: flex;
          justify-content: center;
          align-items: center;
          cursor: pointer;
          z-index: 1001;
          box-shadow: 0 8px 32px rgba(102, 126, 234, 0.4);
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
          border: 3px solid rgba(255, 255, 255, 0.2);
        }

        .bot-icon:hover {
          transform: translateY(-3px) scale(1.05);
          box-shadow: 0 12px 40px rgba(102, 126, 234, 0.6);
        }

            .icon-inner {
            color: white;
            font-size: 1.5rem;
            margin: 17px;
            }

        /* Chat Window */
        .chat-window {
          position: fixed;
          bottom: 100px;
          left: 20px;
          width: 380px;
          max-height: 500px;
          background: rgba(255, 255, 255, 0.95);
          backdrop-filter: blur(20px);
          border-radius: 20px;
          box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
          display: flex;
          flex-direction: column;
          z-index: 1000;
          border: 1px solid rgba(255, 255, 255, 0.3);
          animation: slideUp 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes slideUp {
          from {
            opacity: 0;
            transform: translateY(20px) scale(0.95);
          }
          to {
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }

        .chat-header {
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          color: white;
          padding: 16px 20px;
          display: flex;
          justify-content: space-between;
          align-items: center;
          border-radius: 20px 20px 0 0;
          position: relative;
        }

        .header-content {
          display: flex;
          align-items: center;
          gap: 12px;
        }

        .header-avatar {
          width: 40px;
          height: 40px;
          border-radius: 50%;
          border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .header-text h4 {
          margin: 0;
          font-size: 16px;
          font-weight: 600;
        }

        .status {
          font-size: 12px;
          opacity: 0.9;
          margin: 0;
        }

        .close-icon {
          cursor: pointer;
          padding: 8px;
          border-radius: 50%;
          transition: all 0.2s ease;
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .close-icon:hover {
          background: rgba(255, 255, 255, 0.2);
          transform: scale(1.1);
        }

            .chat-content {
            display: flex;
            flex-direction: column;
            padding: 10px;
            overflow-y: auto;
            }

            .messages {
            overflow-y: auto;
            margin-bottom: 10px;
            }

            .message {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            }

            .message.user {
            justify-content: flex-end;
            }

            .message.bot {
            justify-content: flex-start;
            }

            .message .avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            margin-right: 10px;
            }

        .message-text {
          max-width: 75%;
          padding: 12px 16px;
          border-radius: 18px;
          position: relative;
          word-wrap: break-word;
          line-height: 1.4;
        }

        .message.bot .message-text {
          background: linear-gradient(135deg, #f8f9ff 0%, #e8ecff 100%);
          color: #2d3748;
          border-bottom-left-radius: 6px;
          border: 1px solid rgba(102, 126, 234, 0.1);
        }

        .message.user .message-text {
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          color: white;
          border-bottom-right-radius: 6px;
          box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .text-content {
          white-space: pre-wrap;
          line-height: 1.5;
          font-size: 14px;
        }

        .text-content strong,
        .text-content b {
          font-weight: 600;
          color: #4a5568;
        }

        .message.user .text-content strong,
        .message.user .text-content b {
          color: rgba(255, 255, 255, 0.95);
        }

        .qr-code {
          max-width: 150px;
          border-radius: 8px;
        }

        /* Typing Indicator */
        .typing-message {
          opacity: 0.8;
        }

        .typing-indicator {
          display: flex;
          gap: 4px;
          padding: 8px 0;
        }

        .typing-indicator span {
          width: 8px;
          height: 8px;
          border-radius: 50%;
          background: #667eea;
          animation: typing 1.4s infinite ease-in-out;
        }

        .typing-indicator span:nth-child(1) {
          animation-delay: 0s;
        }

        .typing-indicator span:nth-child(2) {
          animation-delay: 0.2s;
        }

        .typing-indicator span:nth-child(3) {
          animation-delay: 0.4s;
        }

        @keyframes typing {
          0%, 60%, 100% {
            transform: translateY(0);
            opacity: 0.4;
          }
          30% {
            transform: translateY(-10px);
            opacity: 1;
          }
        }

            /* Input Field */
            .chat-input {
            display: flex;
            align-items: center;
            padding: 10px;
            border-top: 1px solid #ddd;
            }

            .input-field {
            border: none;
            padding: 10px;
            border-radius: 20px;
            margin-right: 10px;
            background: #f1f1f1;
            color: black;
            }

            .send-button {
            background: #4caf50;
            border-radius: 10px;
            width: 50px;
            color: white;
            border: none;
            cursor: pointer;
            }

            .send-button:hover {
            background: #45a049;
            }
        `}</style>
    </>
    );

};

export default Chatbot;












// import "font-awesome/css/font-awesome.min.css";
// import React, { useState, useRef } from "react";
// import QRCode from "qrcode";
// import "./Chatbot.css"; // Assuming the CSS is in a separate file
// import "font-awesome/css/font-awesome.min.css";

// const Chatbot = () => {
//   // State management using useState
//   const [isChatOpen, setIsChatOpen] = useState(false);
//   const [message, setMessage] = useState("");
//   const [messages, setMessages] = useState([]);
//   const avatarUrl =
//     "https://w7.pngwing.com/pngs/408/238/png-transparent-pink-and-blue-illustration-discord-computer-icons-logo-user-internet-bot-discord-icon-purple-angle-violet-thumbnail.png";
  
//   // Ref for scrolling to the bottom of the messages
//   const messagesRef = useRef(null);

//   // Toggle chat window visibility
//   const toggleChat = () => {
//     setIsChatOpen(!isChatOpen);
//   };

//   // Handle sending a message
//   const sendMessage = async (e) => {
//     e.preventDefault();
//     const userMessage = message.trim();
//     if (!userMessage) return;

//     addMessage(userMessage, "user");

//     if (userMessage.toLowerCase().includes("qr")) {
//       const qrCode = await generateQRCode(userMessage);
//       addMessage(qrCode, "bot", true);
//     } else {
//       const botReply = getBotReply(userMessage);
//       setTimeout(() => {
//         addMessage(botReply, "bot");
//       }, 500);
//     }

//     setMessage("");
//   };

//   // Add a message to the messages array and scroll to bottom
//   const addMessage = (textOrQrCode, type, isQrCode = false) => {
//     const message = isQrCode
//       ? { qrCode: textOrQrCode, type }
//       : { text: textOrQrCode, type };
//     setMessages((prevMessages) => [...prevMessages, message]);
//     scrollToBottom();
//   };

//   // Generate QR code using the qrcode library
//   const generateQRCode = async (text) => {
//     try {
//       return await QRCode.toDataURL(text);
//     } catch (err) {
//       console.error("QR Code generation failed:", err);
//       return null;
//     }
//   };

//   // Determine bot reply based on user message
//   const getBotReply = (userMessage) => {
//     const lowerMessage = userMessage.toLowerCase();

//     if (lowerMessage.includes("hello") || lowerMessage.includes("hi")) {
//       return "Hello! Welcome to my bot service. How can I assist you today?";
//     } else if (lowerMessage.includes("price") || lowerMessage.includes("cost")) {
//       return "Our services vary in price depending on your requirements. Can you specify the service you're interested in?";
//     } else if (lowerMessage.includes("support") || lowerMessage.includes("help")) {
//       return "Our support team is available 24/7 to assist you. Please let us know the issue you're facing.";
//     } else if (lowerMessage.includes("email")) {
//       return "Here is our email: choengrayu307@gmail.com or you can click the header button contact to directly email me";
//     } else if (lowerMessage.includes("phone") || lowerMessage.includes("·ûõ·üÅ·ûÅ·ûë·ûº·ûö·ûü·üê·ûñ·üí·ûë")) {
//       return "Here is our phone number: 096 998 3479 or telegram contact: https://t.me/Choeng_Rayu";
//     } else if (lowerMessage.includes("telegram")) {
//       return "Here is Telegram, you can use either: https://t.me/Choeng_Rayu/ or @President_Alein";
//     } else if (lowerMessage.includes("contact")) {
//       return "You can contact us via email, Telegram, phone, and LinkedIn.";
//     } else if (lowerMessage.includes("linkedin")) {
//       return "Here is our LinkedIn profile: https://www.linkedin.com/in/rayu-choeng-351243335/";
//     } else if (lowerMessage.includes("whatsapp")) {
//       return "Here is our WhatsApp number: +855 96 998 3479.";
//     } else if (lowerMessage.includes("facebook")) {
//       return "Here facebook: Rayu Choeng  or Click the link: https://web.facebook.com/choeng.rayu.5?_rdc=1&_rdr#";
//     } else if (lowerMessage.includes("instagram")) {
//       return "I will create account on Instagram soon but now please contact by another way.";
//     } else if (lowerMessage.includes("bye")) {
//       return "Goodbye! Feel free to chat with me again anytime.";
//     } else {
//       return "I'm here to help with your queries. Can you provide more details about what you're looking for?";
//     }
//   };

//   // Scroll to the bottom of the messages div
//   const scrollToBottom = () => {
//     if (messagesRef.current) {
//       messagesRef.current.scrollTop = messagesRef.current.scrollHeight;
//     }
//   };

//   // JSX structure
//     return (
//     <>
//         <div className="chatbot">
//         {/* Chatbot Icon */}
//         <div className="bot-icon" onClick={toggleChat}>
//             <div className="icon-inner">
//             <i className="fa fa-commenting" aria-hidden="true"></i>
//             </div>
//         </div>

//         {/* Chatbot Window */}
//         {isChatOpen && (
//             <div className="chat-window">
//             <div className="chat-header">
//                 <span className="close-icon" onClick={toggleChat}>
//                 <i className="fa fa-window-close" aria-hidden="true"></i>
//                 </span>
//                 <h4>How can we help you?</h4>
//             </div>
//             <div className="chat-content">
//                 <div className="messages" ref={messagesRef}>
//                 {messages.map((msg, index) => (
//                     <div key={index} className={`message ${msg.type}`}>
//                     {msg.type === "bot" && (
//                         <img className="avatar" src={avatarUrl} alt="Bot Avatar" />
//                     )}
//                     <div className="message-text">
//                         {msg.qrCode ? (
//                         <img src={msg.qrCode} alt="QR Code" />
//                         ) : (
//                         <div style={{ color: "black" }}>{msg.text}</div>
//                         )}
//                     </div>
//                     </div>
//                 ))}
//                 </div>
//                 <form onSubmit={sendMessage} className="chat-input">
//                 <input
//                     value={message}
//                     onChange={(e) => setMessage(e.target.value)}
//                     type="text"
//                     placeholder="Send a message..."
//                     className="input-field"
//                 />
//                 <button type="submit" className="send-button">
//                     <i className="fa fa-paper-plane" aria-hidden="true"></i>
//                 </button>
//                 </form>
//             </div>
//             </div>
//         )}
//         </div>
//         <style jsx>{`
//         /* ...your styles here... */
//         /* Chatbot Icon */
//             .bot-icon {
//             position: fixed;
//             bottom: 15px;
//             left: 15px;
//             background: #3b4f69;
//             border-radius: 50%;
//             width: 60px;
//             height: 60px;
//             display: flex;
//             justify-content: center;
//             align-items: center;
//             cursor: pointer;
//             z-index: 1000;
//             }

//             .icon-inner {
//             color: white;
//             font-size: 1.5rem;
//             margin: 17px;
//             }

//             /* Chat Window */
//             .chat-window {
//             position: fixed;
//             bottom: 80px;
//             left: 15px;
//             width: 320px;
//             background: white;
//             border-radius: 10px;
//             box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
//             display: flex;
//             flex-direction: column;
//             z-index: 1000;
//             }

//             .chat-header {
//             background: gray;
//             color: white;
//             padding: 10px;
//             justify-content: space-between;
//             align-items: center;
//             border-radius: 10px 10px 0 0;
//             }

//             .close-icon {
//             cursor: pointer;
//             }

//             .chat-content {
//             display: flex;
//             flex-direction: column;
//             padding: 10px;
//             overflow-y: auto;
//             }

//             .messages {
//             overflow-y: auto;
//             margin-bottom: 10px;
//             }

//             .message {
//             display: flex;
//             align-items: center;
//             margin-bottom: 10px;
//             }

//             .message.user {
//             justify-content: flex-end;
//             }

//             .message.bot {
//             justify-content: flex-start;
//             }

//             .message .avatar {
//             width: 30px;
//             height: 30px;
//             border-radius: 50%;
//             margin-right: 10px;
//             }

//             .message-text {
//             background: #f1f1f1;
//             border-radius: 15px;
//             padding: 10px;
//             max-width: 70%;
//             color: black !important;
//             }

//             .message.user .message-text {
//             background: #4caf50;
//             color: white;
//             }

//             /* Input Field */
//             .chat-input {
//             display: flex;
//             align-items: center;
//             padding: 10px;
//             border-top: 1px solid #ddd;
//             }

//             .input-field {
//             border: none;
//             padding: 10px;
//             border-radius: 20px;
//             margin-right: 10px;
//             background: #f1f1f1;
//             color: black;
//             }

//             .send-button {
//             background: #4caf50;
//             border-radius: 10px;
//             width: 50px;
//             color: white;
//             border: none;
//             cursor: pointer;
//             }

//             .send-button:hover {
//             background: #45a049;
//             }
//         `}</style>
//     </>
//     );

// };

// export default Chatbot;
